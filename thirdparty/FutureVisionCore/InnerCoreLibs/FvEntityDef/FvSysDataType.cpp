#include "FvSysDataType.h"


#define SYSDATATYPE_SPECIALIZE_IMPLEMENT(_TYPE, _ID)							\
	template<>																	\
	FvDataTypeID FvSysDataType::DataTypeID<_TYPE>(const _TYPE&) { return _ID; }

SYSDATATYPE_SPECIALIZE_IMPLEMENT(bool, FVOBJ_BOOL)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvUInt8, FVOBJ_UINT8)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvUInt16, FVOBJ_UINT16)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvUInt32, FVOBJ_UINT32)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvUInt64, FVOBJ_UINT64)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvInt8, FVOBJ_INT8)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvInt16, FVOBJ_INT16)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvInt32, FVOBJ_INT32)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvInt64, FVOBJ_INT64)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(float, FVOBJ_FLOAT)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(double, FVOBJ_DOUBLE)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvString, FVOBJ_STRING)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvVector2, FVOBJ_VECTOR2)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvVector3, FVOBJ_VECTOR3)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvVector4, FVOBJ_VECTOR4)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvObjBlob, FVOBJ_BLOB)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvObjUDO, FVOBJ_UDO)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvObjStruct, FVOBJ_STRUCT)
SYSDATATYPE_SPECIALIZE_IMPLEMENT(FvObjMailBox, FVOBJ_MAILBOX)

#ifdef FV_SERVER

#define SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(_TYPE, _FVTYPE)		\
	template<>															\
	void FvSysDataType::GetValue(_TYPE& kVal, const FvDataObj* pkObj)	\
	{																	\
		FV_ASSERT(pkObj && pkObj->GetDataTypeID()==DataTypeID(kVal));	\
		kVal = *static_cast<const _FVTYPE*>(pkObj);						\
	}																	\
	template<>															\
	void FvSysDataType::SetValue(const _TYPE& kVal, FvDataObj* pkObj)	\
	{																	\
		FV_ASSERT(pkObj && pkObj->GetDataTypeID()==DataTypeID(kVal));	\
		*static_cast<_FVTYPE*>(pkObj) = kVal;							\
	}

#else

#define SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(_TYPE, _FVTYPE)		\
	template<>															\
	void FvSysDataType::GetValue(_TYPE& kVal, const FvDataObj* pkObj)	\
	{																	\
		FV_ASSERT(pkObj && pkObj->GetDataTypeID()==DataTypeID(kVal));	\
		kVal = *static_cast<const _FVTYPE*>(pkObj);						\
	}

#endif

SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(bool, FvObjBool)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvUInt8, FvObjUInt8)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvUInt16, FvObjUInt16)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvUInt32, FvObjUInt32)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvUInt64, FvObjUInt64)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvInt8, FvObjInt8)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvInt16, FvObjInt16)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvInt32, FvObjInt32)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvInt64, FvObjInt64)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(float, FvObjFloat)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(double, FvObjDouble)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvString, FvObjString)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvVector2, FvObjVector2)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvVector3, FvObjVector3)
SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT(FvVector4, FvObjVector4)

#undef SYSDATATYPE_SPECIALIZE_IMPLEMENT
#undef SYSDATATYPE_GET_SET_SPECIALIZE_IMPLEMENT




#define OLDFVDATA_GET_DATA_IMPLEMENT(_ST, _FT)								\
	template<>																\
	FvDataObj* OldFvData::Get(const _ST& kVal) { return _FT::OldData(kVal); }

OLDFVDATA_GET_DATA_IMPLEMENT(bool, FvObjBool)
OLDFVDATA_GET_DATA_IMPLEMENT(FvInt8, FvObjInt8)
OLDFVDATA_GET_DATA_IMPLEMENT(FvInt16, FvObjInt16)
OLDFVDATA_GET_DATA_IMPLEMENT(FvInt32, FvObjInt32)
OLDFVDATA_GET_DATA_IMPLEMENT(FvInt64, FvObjInt64)
OLDFVDATA_GET_DATA_IMPLEMENT(FvUInt8, FvObjUInt8)
OLDFVDATA_GET_DATA_IMPLEMENT(FvUInt16, FvObjUInt16)
OLDFVDATA_GET_DATA_IMPLEMENT(FvUInt32, FvObjUInt32)
OLDFVDATA_GET_DATA_IMPLEMENT(FvUInt64, FvObjUInt64)
OLDFVDATA_GET_DATA_IMPLEMENT(float, FvObjFloat)
OLDFVDATA_GET_DATA_IMPLEMENT(double, FvObjDouble)
OLDFVDATA_GET_DATA_IMPLEMENT(FvString, FvObjString)
OLDFVDATA_GET_DATA_IMPLEMENT(FvVector2, FvObjVector2)
OLDFVDATA_GET_DATA_IMPLEMENT(FvVector3, FvObjVector3)
OLDFVDATA_GET_DATA_IMPLEMENT(FvVector4, FvObjVector4)

#undef OLDFVDATA_GET_DATA_IMPLEMENT

